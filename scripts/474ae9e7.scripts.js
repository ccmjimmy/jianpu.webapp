"use strict";function dotString(a){return new Array(a+1).join("d")}function draw(a){var b="@"===a.pitch("accidental")?"n":a.pitch("accidental"),c=a.pitch("step")+b+"/"+a.pitch("octave"),d=$("canvas")[0],e=new Vex.Flow.Renderer(d,Vex.Flow.Renderer.Backends.CANVAS),f=e.getContext();f.clearRect(0,0,d.width,d.height);var g=new Vex.Flow.Stave(10,80,200);g.addClef("treble").setContext(f).draw();var h={keys:[c],duration:(TYPE_TO_DURATION[a.type()]||a.type())+dotString(a.dot()),stem_direction:a.pitch("jpOctave")>0?-1:1};console.log(h,a.duration());var i=new Vex.Flow.StaveNote(h);b&&i.addAccidental(0,new Vex.Flow.Accidental(b)),a.dot()&&i.addDotToAll();var j=[i],k=new Vex.Flow.Voice({num_beats:a.duration(),beat_value:4,resolution:Vex.Flow.RESOLUTION});k.addTickables(j),(new Vex.Flow.Formatter).joinVoices([k]).format([k],200),k.draw(f,g)}angular.module("jianpuApp",["ngCookies","ngResource","ngSanitize"]).config(["$routeProvider",function(a){a.when("/toyRoom",{templateUrl:"views/toy-room.html",controller:"ToyRoomCtrl"}).when("/studio",{templateUrl:"views/studio.html",controller:"StudioCtrl"}).when("/about",{templateUrl:"views/about.html"}).otherwise({redirectTo:"/about"})}]),angular.module("jianpuApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return b.path()===a}}]);var TYPE_TO_DURATION={1:"w",2:"h",4:"q"};angular.module("jianpuApp").controller("ToyRoomCtrl",["$scope",function(a){a.change=function(){var b=a.note=new ott.Note(a.noteString);draw(b)}}]),angular.module("jianpuApp").controller("StudioCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);